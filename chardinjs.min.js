// Generated by CoffeeScript 1.9.1
(function(){var k=[].slice;(function(e,g){var h;h=function(){function d(a){this.$el=e(a);e(g).resize(function(a){return function(){return a.refresh()}}(this))}d.prototype.start=function(){var a,b,c,f;if(this._overlay_visible())return!1;this._add_overlay_layer();f=this.$el.find("*[data-intro]:visible");b=0;for(c=f.length;b<c;b++)a=f[b],this._show_element(a);return this.$el.trigger("chardinJs:start")};d.prototype.toggle=function(){return this._overlay_visible()?this.stop():this.start()};d.prototype.refresh=
function(){var a,b,c,f,d;if(this._overlay_visible()){f=this.$el.find("*[data-intro]:visible");d=[];b=0;for(c=f.length;b<c;b++)a=f[b],d.push(this._position_helper_layer(a));return d}return this};d.prototype.stop=function(){this.$el.find(".chardinjs-overlay").fadeOut(function(){return e(this).remove()});this.$el.find(".chardinjs-helper-layer").remove();this.$el.find(".chardinjs-show-element").removeClass("chardinjs-show-element");this.$el.find(".chardinjs-relative-position").removeClass("chardinjs-relative-position");
g.removeEventListener?g.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown);return this.$el.trigger("chardinJs:stop")};d.prototype._overlay_visible=function(){return 0!==this.$el.find(".chardinjs-overlay").length};d.prototype._add_overlay_layer=function(){var a,b,c;if(this._overlay_visible())return!1;b=document.createElement("div");c="";b.className="chardinjs-overlay";if("BODY"===this.$el.prop("tagName"))c+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",
b.setAttribute("style",c);else if(a=this._get_offset(this.$el.get()[0]))c+="width: "+a.width+"px; height:"+a.height+"px; top:"+a.top+"px;left: "+a.left+"px;",b.setAttribute("style",c);this.$el.get()[0].appendChild(b);b.innerHTML='<svg style="width:100%;height:100%;"><defs><mask id="chardinjs-mask" x="0" y="0" width="'+b.offsetWidth+'" height="'+b.offsetHeight+'" ><rect x="0" y="0" width="'+b.offsetWidth+'" height="'+b.offsetHeight+'" style="stroke:none; fill: #ffffff"/></mask></defs><rect x="0" y="0" width="'+
b.offsetWidth+'" height="'+b.offsetHeight+'" style="stroke: none; fill: rgba(0,0,0,.8); mask: url(#chardinjs-mask)"/></svg>';b.onclick=function(a){return function(){return a.stop()}}(this);return setTimeout(function(){c+="opacity:1;background:none;";return b.setAttribute("style",c)},10)};d.prototype._get_position=function(a){return a.getAttribute("data-position")||"bottom"};d.prototype._place_tooltip=function(a){var b,c,d;c=e(a).data("tooltip_layer");d=this._get_offset(c);c.style.top=null;c.style.right=
null;c.style.bottom=null;c.style.left=null;switch(this._get_position(a)){case "top":case "bottom":b=this._get_offset(a);b=b.width;e(c).width();c.style.left=b/2-d.width/2+"px";break;case "left":case "right":b=this._get_offset(a),b=b.height,e(c).height(),c.style.top=b/2-d.height/2+"px"}switch(this._get_position(a)){case "left":return c.style.left="-"+(d.width-34)+"px";case "right":return c.style.right="-"+(d.width-34)+"px";case "bottom":return c.style.bottom="-"+d.height+"px";case "top":return c.style.top=
"-"+d.height+"px"}};d.prototype._position_helper_layer=function(a){var b;b=e(a).data("helper_layer");a=this._get_offset(a);document.getElementById("chardinjs-mask").innerHTML+='<rect x="'+a.left+'" y="'+a.top+'" width="'+a.width+'" height="'+a.height+'" style="stroke:none; fill: #999"></rect>';return b.setAttribute("style","width: "+a.width+"px; height:"+a.height+"px; top:"+a.top+"px; left: "+a.left+"px;")};d.prototype._show_element=function(a){var b,c;this._get_offset(a);b=document.createElement("div");
c=document.createElement("div");e(a).data("helper_layer",b).data("tooltip_layer",c);a.id&&b.setAttribute("data-id",a.id);b.className="chardinjs-helper-layer chardinjs-"+this._get_position(a);this._position_helper_layer(a);this.$el.get()[0].appendChild(b);c.className="chardinjs-tooltip chardinjs-"+this._get_position(a);c.innerHTML="<div class='chardinjs-tooltiptext'>"+a.getAttribute("data-intro")+"</div>";b.appendChild(c);this._place_tooltip(a);a.className+=" chardinjs-show-element";b="";a.currentStyle?
b=a.currentStyle.position:document.defaultView&&document.defaultView.getComputedStyle&&(b=document.defaultView.getComputedStyle(a,null).getPropertyValue("position"));b=b.toLowerCase();if("absolute"!==b&&"relative"!==b)return a.className+=" chardinjs-relative-position"};d.prototype._get_offset=function(a){var b,c,d;d={width:a.offsetWidth,height:a.offsetHeight};for(c=b=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;d.top=c;d.left=b;return d};return d}();
return e.fn.extend({chardinJs:function(){var d,a,b,c;c=arguments[0];a=2<=arguments.length?k.call(arguments,1):[];d=e(this[0]);(b=d.data("chardinJs"))||d.data("chardinJs",b=new h(this,c));"string"===typeof c&&b[c].apply(b,a);return b}})})(window.jQuery,window)}).call(this);
